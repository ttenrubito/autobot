# üìä Autobot System Flow Analysis

## üéØ ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

‡∏£‡∏∞‡∏ö‡∏ö Autobot ‡πÄ‡∏õ‡πá‡∏ô **AI-Powered Commerce Chatbot** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡πÄ‡∏ô‡∏°‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠:

1. **‡∏£‡∏±‡∏ö Chat ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡∏à‡∏≤‡∏Å LINE / Facebook Messenger
2. **‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤** ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏™‡∏ï‡πá‡∏≠‡∏Å ‡∏ú‡πà‡∏≤‡∏ô AI (LLM + Vision)
3. **‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô** ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ (Full/Installment/Savings)
4. **‡∏™‡∏£‡πâ‡∏≤‡∏á Case** ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å Event ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Admin ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ
5. **Handoff ‡πÉ‡∏´‡πâ Admin** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡πÄ‡∏Ñ‡∏™‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏î‡∏π‡πÅ‡∏•

---

## üîÑ Data Flow Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           CUSTOMER CHAT FLOW                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   [LINE/Facebook]                                                            ‚îÇ
‚îÇ        ‚îÇ                                                                     ‚îÇ
‚îÇ        ‚ñº                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                        ‚îÇ
‚îÇ   ‚îÇ   Webhook       ‚îÇ  ‚Üê ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°/‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤                         ‚îÇ
‚îÇ   ‚îÇ (line.php /     ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îÇ  facebook.php)  ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                        ‚îÇ
‚îÇ            ‚îÇ                                                                 ‚îÇ
‚îÇ            ‚ñº                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îÇ
‚îÇ   ‚îÇ RouterV1Handler ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   CaseEngine    ‚îÇ ‚Üê ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Case          ‚îÇ
‚îÇ   ‚îÇ  (Bot Logic)    ‚îÇ     ‚îÇ                 ‚îÇ                               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îÇ
‚îÇ            ‚îÇ                       ‚îÇ                                         ‚îÇ
‚îÇ            ‚ñº                       ‚ñº                                         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ   ‚îÇ                    DATABASE TABLES                           ‚îÇ           ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§           ‚îÇ
‚îÇ   ‚îÇ    cases     ‚îÇ    orders    ‚îÇ   savings    ‚îÇ  installments  ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ   (‡πÄ‡∏Ñ‡∏™)      ‚îÇ   (‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå)   ‚îÇ   (‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô)   ‚îÇ    (‡∏ú‡πà‡∏≠‡∏ô)      ‚îÇ           ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìù ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏•‡∏∞ Timing ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### 1Ô∏è‚É£ **cases.php** - ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏∏‡∏Å Event

| ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
|-------------|---------|-------------|
| ‚úÖ **‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡∏Å‡∏°‡∏≤** | Bot ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Intent (product_inquiry, payment_*, etc.) | `open` |
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | Intent: product_lookup_by_code, product_availability | Case Type: `product_inquiry` |
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏ï‡πá‡∏° | Intent: payment_slip_verify | Case Type: `payment_full` |
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ú‡πà‡∏≠‡∏ô | Intent: installment_flow, installment_pay | Case Type: `payment_installment` |
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏° | Intent: savings_new, savings_deposit | Case Type: `payment_savings` |

**Case ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà vs ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó:**
- ‚úÖ **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ Case ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà (status ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà resolved/cancelled)
- ‚úÖ **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Case ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏° slots, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô status

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏™‡∏ô‡πÉ‡∏à Rolex Submariner"
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case #1 (type: product_inquiry, status: open)

‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞"
‚Üí ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Case #1 ‚Üí handoff_to_admin (‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ï‡∏Å‡∏•‡∏á‡∏ã‡∏∑‡πâ‡∏≠)

‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞" + ‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case #2 (type: payment_full, status: pending_admin)
```

---

### 2Ô∏è‚É£ **orders.php** - ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠

| ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
|-------------|---------|-------------|
| ‚ö†Ô∏è **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà Auto-Create ‡∏à‡∏≤‡∏Å Chat** | ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ Admin ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô/‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á | - |
| ‚úÖ Bot ‡∏™‡∏£‡πâ‡∏≤‡∏á Draft Order | ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ + ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | `pending` |
| ‚úÖ Admin ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á | ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Admin Panel | `pending` |

**Flow ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
```
1. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‚Üí Cases (product_inquiry)
2. Admin ‡∏ï‡∏Å‡∏•‡∏á‡∏Ç‡∏≤‡∏¢/‡∏£‡∏±‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥ ‚Üí Admin ‡∏™‡∏£‡πâ‡∏≤‡∏á Order ‡πÄ‡∏≠‡∏á
3. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ ‚Üí Payment ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö Order
```

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏Ç‡∏≤‡∏î:**
- ‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Auto-Create Order ‡∏à‡∏≤‡∏Å Chat (‡∏ï‡πâ‡∏≠‡∏á integrate ‡∏Å‡∏±‡∏ö Product API ‡∏Å‡πà‡∏≠‡∏ô)
- ‚ö†Ô∏è Draft Order ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ product_ref_id

---

### 3Ô∏è‚É£ **savings.php** - ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô

| ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
|-------------|---------|-------------|
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≠‡∏Å "‡∏™‡∏ô‡πÉ‡∏à‡∏≠‡∏≠‡∏°" | Intent: savings_new + ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | `active` |
| ‚úÖ Admin ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ | ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Admin | `active` |

**Flow:**
```
1. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏≠‡∏¢‡∏≤‡∏Å‡∏≠‡∏≠‡∏° Rolex GMT"
   ‚Üí Bot ‡∏ñ‡∏≤‡∏° "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏∞?"
   ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á savings_account (target_amount: X, current_amount: 0)
   ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case (type: payment_savings)

2. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏∞" + ‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ
   ‚Üí Bot ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å savings_transaction (status: pending)
   ‚Üí Admin verify ‚Üí current_amount += X

3. ‡πÄ‡∏°‡∏∑‡πà‡∏≠ current_amount >= target_amount
   ‚Üí Status ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `ready_to_purchase`
```

**‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:**
- **savings_accounts** ‚Üí ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏≠‡∏° (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
- **savings_transactions** ‚Üí ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô

---

### 4Ô∏è‚É£ **installments.php** - ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞

| ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
|-------------|---------|-------------|
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≠‡∏Å "‡∏™‡∏ô‡πÉ‡∏à‡∏ú‡πà‡∏≠‡∏ô" | Intent: installment_new | `pending_approval` |
| ‚úÖ Admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå | `active` |
| ‚ö†Ô∏è ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå | ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ slip + down_payment_amount | `active` |

**Flow:**
```
1. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ú‡πà‡∏≠‡∏ô Rolex 3 ‡∏á‡∏ß‡∏î"
   ‚Üí Bot ‡∏ñ‡∏≤‡∏° "‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏∞?"
   ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case (type: payment_installment)

2. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏°‡∏±‡∏î‡∏à‡∏≥
   ‚Üí Bot ‡∏™‡∏£‡πâ‡∏≤‡∏á installment_contract (status: pending_approval)
   ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á installment_schedules (‡∏á‡∏ß‡∏î 1, 2, 3...)
   ‚Üí Admin verify ‚Üí status = active

3. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ä‡∏≥‡∏£‡∏∞‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà 2"
   ‚Üí Bot ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å payment ‚Üí installment_payments
   ‚Üí Admin verify ‚Üí paid_periods += 1
```

**‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:**
- **installment_contracts** ‚Üí ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
- **installment_schedules** ‚Üí Auto-generate ‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î
- **installment_payments** ‚Üí ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡∏á‡∏ß‡∏î

---

### 5Ô∏è‚É£ **addresses.php** - ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á

| ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|-------------|---------|------|
| ‚úÖ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á | ‡∏´‡∏ô‡πâ‡∏≤ Customer Portal / LIFF | - |
| ‚úÖ Admin ‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏´‡πâ | ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Admin | - |
| ‚ö†Ô∏è ‡∏à‡∏≤‡∏Å Chat | ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥ (‡∏ï‡πâ‡∏≠‡∏á NLP extract address) | - |

---

## ü§ñ Bot Intent ‚Üí Table Mapping

| Intent | Case Type | ‡∏™‡∏£‡πâ‡∏≤‡∏á Order? | ‡∏™‡∏£‡πâ‡∏≤‡∏á Savings? | ‡∏™‡∏£‡πâ‡∏≤‡∏á Installment? |
|--------|-----------|-------------|----------------|-------------------|
| `product_lookup_by_code` | product_inquiry | ‚ùå | ‚ùå | ‚ùå |
| `product_availability` | product_inquiry | ‚ùå | ‚ùå | ‚ùå |
| `price_inquiry` | product_inquiry | ‚ùå | ‚ùå | ‚ùå |
| `payment_slip_verify` | payment_full | ‚úÖ (Draft) | ‚ùå | ‚ùå |
| `installment_new` | payment_installment | ‚ùå | ‚ùå | ‚úÖ |
| `installment_pay` | payment_installment | ‚ùå | ‚ùå | ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó |
| `savings_new` | payment_savings | ‚ùå | ‚úÖ | ‚ùå |
| `savings_deposit` | payment_savings | ‚ùå | ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó | ‚ùå |

---

## üíº Admin Workload Reduction Analysis

### ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á

| ‡∏á‡∏≤‡∏ô | ‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏µ Autobot | ‡∏´‡∏•‡∏±‡∏á‡∏°‡∏µ Autobot | ‡∏•‡∏î‡πÑ‡∏î‡πâ |
|-----|---------------|----------------|-------|
| ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | 100% Manual | 70% Auto | **70%** |
| ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏£‡∏≤‡∏Ñ‡∏≤ | 100% Manual | 90% Auto (API) | **90%** |
| ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ/‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö | 100% Manual | 60% Auto (OCR) | **60%** |
| ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏° | 100% Manual | 80% Auto | **80%** |
| ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏ß‡∏î‡∏ú‡πà‡∏≠‡∏ô | 100% Manual | 80% Auto | **80%** |
| ‡∏™‡∏£‡πâ‡∏≤‡∏á Order | 100% Manual | 30% Auto | **30%** |
| ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏™‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | 100% Manual | 10% Auto | **10%** |

### ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°: **~55-65%**

**‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà Bot ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ:**
- ‚úÖ ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° FAQ ‡∏ã‡πâ‡∏≥‡πÜ (‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î, ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠)
- ‚úÖ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å Code/‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- ‚úÖ ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÅ‡∏•‡∏∞ OCR ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Transaction ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Due Date ‡∏ú‡πà‡∏≠‡∏ô/‡∏≠‡∏≠‡∏°

**‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Admin:**
- ‚ö†Ô∏è ‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤/‡πÉ‡∏´‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î
- ‚ö†Ô∏è ‡∏ô‡∏±‡∏î‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/Call Video
- ‚ö†Ô∏è Approve Payment (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
- ‚ö†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
- ‚ö†Ô∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á Order (‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢)

---

## üßë‚Äçüíº Customer Profile - ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:
- ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `customers` ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö Profile ‡∏£‡∏ß‡∏°
- ‚ö†Ô∏è ‡πÉ‡∏ä‡πâ `external_user_id` ‡∏à‡∏≤‡∏Å LINE/Facebook ‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô
- ‚ö†Ô∏è ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô 2 Platform = 2 Records

### ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `customers`

```sql
CREATE TABLE customers (
    id INT PRIMARY KEY AUTO_INCREMENT,
    tenant_id VARCHAR(50) NOT NULL DEFAULT 'default',
    
    -- Profile
    display_name VARCHAR(255),
    full_name VARCHAR(255),
    phone VARCHAR(20),
    email VARCHAR(255),
    avatar_url TEXT,
    
    -- Platform Identities (for merging)
    line_user_id VARCHAR(100),
    facebook_user_id VARCHAR(100),
    instagram_user_id VARCHAR(100),
    web_user_id INT, -- Link to users table
    
    -- Stats
    total_orders INT DEFAULT 0,
    total_spent DECIMAL(12,2) DEFAULT 0,
    total_savings DECIMAL(12,2) DEFAULT 0,
    
    -- Status
    status ENUM('active', 'inactive', 'blocked') DEFAULT 'active',
    tags JSON, -- ["VIP", "New", "Problem"]
    notes TEXT,
    
    -- Timestamps
    first_contact_at DATETIME,
    last_contact_at DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME ON UPDATE CURRENT_TIMESTAMP,
    
    -- Indexes
    INDEX idx_line (line_user_id),
    INDEX idx_facebook (facebook_user_id),
    INDEX idx_phone (phone),
    INDEX idx_status (status)
);
```

### ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:
1. **‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å Platform** ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
2. **Auto-complete ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Admin Key Manual** - ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠/‡πÄ‡∏ö‡∏≠‡∏£‡πå ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
3. **‡∏î‡∏π History** ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏∏‡∏Å Channel
4. **Merge Profiles** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
5. **Tag & Segment** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠ Marketing

---

## üîß Recommendations

### 1. Product API Integration (Priority: HIGH)
```
‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Product Database ‡∏ó‡∏µ‡πà Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: Integrate ‡∏Å‡∏±‡∏ö Product Search API
‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: Bot ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô, ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á, ‡∏™‡∏£‡πâ‡∏≤‡∏á Order ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

### 2. Customer Profile Table (Priority: HIGH)
```
‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∞‡πÑ‡∏£
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á customers + link ‡∏Å‡∏±‡∏ö orders/savings/installments
‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: Admin ‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö, Auto-complete ‡∏™‡∏∞‡∏î‡∏ß‡∏Å
```

### 3. Auto Order Creation (Priority: MEDIUM)
```
‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Order ‡πÄ‡∏≠‡∏á
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: Bot ‡∏™‡∏£‡πâ‡∏≤‡∏á Draft Order ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡∏ã‡∏∑‡πâ‡∏≠
‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏•‡∏î‡∏á‡∏≤‡∏ô Admin, ‡πÑ‡∏°‡πà‡∏•‡∏∑‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
```

### 4. Address Extraction (Priority: LOW)
```
‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏ï‡πâ‡∏≠‡∏á Key ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏≠‡∏á
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: NLP Extract ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏≤‡∏Å Chat
‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡πâ
```

---

## üìã Chat Example Scenarios

### Scenario 1: ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‚Üí ‡∏ã‡∏∑‡πâ‡∏≠ ‚Üí ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°

```
[10:00] ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏°‡∏µ Rolex GMT ‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞"
         ‚Üí Intent: product_availability
         ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case #1 (type: product_inquiry)
         ‚Üí Bot: "‡∏û‡∏ö‡∏Ñ‡πà‡∏∞! Rolex GMT Master II ‡∏£‡∏´‡∏±‡∏™ RX-001 ‡∏£‡∏≤‡∏Ñ‡∏≤ 450,000 ‡∏ö‡∏≤‡∏ó"

[10:02] ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡πà‡∏∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"
         ‚Üí Intent: price_inquiry + handoff trigger ("‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤")
         ‚Üí ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Case #1 (status: pending_admin)
         ‚Üí Bot: "‡∏Ç‡∏≠‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•‡∏ï‡πà‡∏≠‡∏ô‡∏∞‡∏Ñ‡∏∞ üë©‚Äçüíº"

[10:05] Admin: "‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞ 430,000 ‡∏•‡∏î‡πÉ‡∏´‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏•‡∏¢"
         ‚Üí Admin Handoff Active (Bot ‡∏´‡∏¢‡∏∏‡∏î‡∏ï‡∏≠‡∏ö 1 ‡∏ä‡∏°.)

[10:10] ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ï‡∏Å‡∏•‡∏á‡∏Ñ‡πà‡∏∞ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞"
         ‚Üí ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Admin Handoff ‚Üí Bot ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö

[10:15] ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: [‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ]
         ‚Üí Intent: payment_slip_verify
         ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case #2 (type: payment_full)
         ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Payment (status: pending)
         ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Draft Order (status: pending)
         ‚Üí Bot: "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üí≥ ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏∞"

[10:20] Admin: Approve Payment
         ‚Üí Payment.status = verified
         ‚Üí Order.status = confirmed
         ‚Üí Case #2.status = resolved
```

### Scenario 2: ‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

```
[Day 1]
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏≠‡∏¢‡∏≤‡∏Å‡∏≠‡∏≠‡∏° Chanel Flap Bag"
‚Üí Intent: savings_new
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case (type: payment_savings)
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á savings_account (target: 150,000)
‚Üí Bot: "‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‚úÖ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 150,000 ‡∏ö‡∏≤‡∏ó"

[Day 7]
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: [‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ 10,000 ‡∏ö‡∏≤‡∏ó]
‚Üí Intent: savings_deposit
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á savings_transaction (pending)
‚Üí Bot: "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üí∞ ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏∞"

Admin: Verify
‚Üí savings_account.current_amount += 10,000

[Day 30]
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏≠‡∏≠‡∏°‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∞"
‚Üí Intent: savings_inquiry
‚Üí Bot: "‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô 30,000 ‡∏ö‡∏≤‡∏ó / ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 150,000 ‡∏ö‡∏≤‡∏ó (20%) üìä"
```

### Scenario 3: ‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞

```
[Day 1]
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ú‡πà‡∏≠‡∏ô Rolex 6 ‡∏á‡∏ß‡∏î ‡∏°‡∏±‡∏î‡∏à‡∏≥ 100,000"
‚Üí Intent: installment_new
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Case (type: payment_installment)
‚Üí Bot: "‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏∞ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏°‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏∞"

‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: [‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ 100,000]
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á installment_contract (status: pending_approval)
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á installment_schedules (6 ‡∏á‡∏ß‡∏î)
‚Üí Bot: "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‚úÖ ‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏∞"

Admin: Approve
‚Üí contract.status = active
‚Üí next_due_date = +30 days

[Day 30]
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: "‡∏ä‡∏≥‡∏£‡∏∞‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà 1 ‡∏Ñ‡πà‡∏∞" + [‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ]
‚Üí Intent: installment_pay
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á installment_payment (pending)
‚Üí Bot: "‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏∞ ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡∏á‡∏ß‡∏î‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß"

Admin: Verify
‚Üí paid_periods = 1
‚Üí schedule[1].status = paid
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏´‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å Chat ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?
**‚úÖ ‡πÉ‡∏ä‡πà‡∏Ñ‡∏£‡∏±‡∏ö** - Webhook ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å LINE/Facebook ‚Üí RouterV1Handler ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database

### ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Manual Mode?
**‚úÖ ‡πÉ‡∏ä‡πà‡∏Ñ‡∏£‡∏±‡∏ö** - ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ (Orders, Cases, Savings, Installments) ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà" ‡πÉ‡∏´‡πâ Admin ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á

### Cases = ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏∏‡∏Å Event?
**‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á** - Cases ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ‡πÅ‡∏•‡∏∞ Link ‡πÑ‡∏õ‡∏´‡∏≤ Orders/Savings/Installments

### ‡∏•‡∏î‡∏á‡∏≤‡∏ô Admin ‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?
**‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 55-65%** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô Routine (‡∏ï‡∏≠‡∏ö FAQ, ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î)
‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô (‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ç‡∏´‡∏≤)

---

*Document Version: 1.0*
*Last Updated: 2026-01-08*
*Author: Autobot Development Team*

---

## üìã Development Checklist (2026-01-08)

### ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
1. ‚úÖ Payment Table Layout - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Grid ‡πÄ‡∏õ‡πá‡∏ô Table
2. ‚úÖ LINE Webhook GCS Upload - ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏õ GCS
3. ‚úÖ Chat Messages API - ‡∏î‡∏∂‡∏á/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å chat ‡∏à‡∏≤‡∏Å DB
4. ‚úÖ Payment Modal Real Chat - ‡πÅ‡∏™‡∏î‡∏á chat ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ modal
5. ‚úÖ Classification Options - ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°/‡∏ú‡πà‡∏≠‡∏ô/‡∏≠‡∏≠‡∏° ‡πÉ‡∏ô approval modal
6. ‚úÖ System Flow Documentation - `docs/SYSTEM_FLOW_ANALYSIS.md`
7. ‚úÖ Customer Profile SQL - `database/migrations/2026_01_08_create_customers_table.sql`
8. ‚úÖ **Orders.php - ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** (‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤)
9. ‚úÖ **Product Autocomplete** - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å API
10. ‚úÖ **Customer Autocomplete** - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
11. ‚úÖ **Customer Search API** - `api/customer/search.php`
12. ‚úÖ **Create Order API** - `api/customer/orders.php` (POST)
13. ‚úÖ **Pagination - Orders API & UI**
14. ‚úÖ **Pagination - Cases API & UI**
15. ‚úÖ **Pagination - Savings API & UI**
16. ‚úÖ **Pagination - Installments API & UI**
17. ‚úÖ **Pagination - Addresses API & UI**
18. ‚úÖ **Placeholder Image Fix** - `images/placeholder-product.svg`

### üîÑ ‡∏£‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- [ ] Test Product Search (‡∏£‡∏≠ Product API ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏° Data)
- [ ] Test Customer Search ‡πÉ‡∏ô browser
- [ ] Test Create Order flow
- [ ] Test Classification Approval flow
- [ ] Test Pagination ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤

### üìù ‡∏¢‡∏±‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Optional)
- [ ] Run customers table migration
- [ ] Deploy to Production
- [ ] Integration Test end-to-end
