# ğŸ¤– Chatbot Test Flows - à¸®.à¹€à¸®à¸‡ à¹€à¸®à¸‡ Jewelry Shop

## ğŸ“‹ Overview
à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸­à¸˜à¸´à¸šà¸²à¸¢ Flow à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Chatbot à¸šà¸™ LINE/Facebook à¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸«à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸šà¹„à¸«à¸™

---

## ğŸ”§ Production API Status

| API | Status | URL |
|-----|--------|-----|
| Bot Cases | âœ… Working | `/api/bot/cases/index.php` |
| Bot Savings | âœ… Working | `/api/bot/savings/index.php` |
| Bot Installments | âš ï¸ Has warnings | `/api/bot/installments/index.php` |
| Bot Deposits | âŒ DB Error | `/api/bot/deposits/index.php` |
| Bot Pawns | âš ï¸ Has warnings | `/api/bot/pawns/index.php` |
| Bot Repairs | âœ… Working | `/api/bot/repairs/index.php` |

---

## ğŸ“± Flow 1: à¸ªà¸­à¸šà¸–à¸²à¸¡à¸ªà¸´à¸™à¸„à¹‰à¸² (Product Inquiry)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸ªà¸™à¹ƒà¸ˆà¹à¸«à¸§à¸™à¸—à¸­à¸‡à¸„à¸³"
"à¸¡à¸µà¸ªà¸£à¹‰à¸­à¸¢à¸„à¸­à¸£à¸¸à¹ˆà¸™à¹„à¸«à¸™à¸šà¹‰à¸²à¸‡"
"à¸”à¸¹à¸à¸³à¹„à¸¥à¸‚à¹‰à¸­à¸¡à¸·à¸­à¸«à¸™à¹ˆà¸­à¸¢"
```

### Bot Process:
1. **RouterV1Handler** à¸£à¸±à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
2. à¸•à¸£à¸§à¸ˆ Intent â†’ `product_inquiry`
3. **CaseEngine** à¸ªà¸£à¹‰à¸²à¸‡ Case à¹ƒà¸«à¸¡à¹ˆ
4. à¸„à¹‰à¸™à¸«à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²à¸”à¹‰à¸§à¸¢ `searchImage` API
5. à¸ªà¹ˆà¸‡ Carousel à¸ªà¸´à¸™à¸„à¹‰à¸²à¸à¸¥à¸±à¸š

### API Called:
```json
POST /api/bot/cases/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "case_type": "product_inquiry"
}
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin Panel**: `/admin/cases.php` â†’ à¹à¸ªà¸”à¸‡ Case à¹ƒà¸«à¸¡à¹ˆ
- **Customer Portal**: `/cases.php` â†’ à¸¥à¸¹à¸à¸„à¹‰à¸²à¸”à¸¹à¸ªà¸–à¸²à¸™à¸° Case à¸•à¸±à¸§à¹€à¸­à¸‡

---

## ğŸ“± Flow 2: à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¸ˆà¹ˆà¸²à¸¢à¹€à¸‡à¸´à¸™à¸ªà¸” (Full Payment)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹à¸«à¸§à¸™à¸—à¸­à¸‡ à¸£à¸«à¸±à¸ª R001"
"à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¹€à¸¥à¸¢"
```

### Bot Process:
1. à¸•à¸£à¸§à¸ˆ Intent â†’ `purchase` à¸«à¸£à¸·à¸­ `order_create`
2. à¸ªà¸£à¹‰à¸²à¸‡ Case type `payment_full`
3. Bot à¸–à¸²à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥: à¸Šà¸·à¹ˆà¸­, à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ, à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£
4. à¸ªà¸£à¹‰à¸²à¸‡ Draft Order
5. à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¹ˆà¸‡à¸ªà¸¥à¸´à¸›à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™ â†’ Vision API à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ
6. à¸¢à¸·à¸™à¸¢à¸±à¸™ Order

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¹ˆà¸‡à¸£à¸¹à¸›à¸ªà¸¥à¸´à¸›:
```
[à¸£à¸¹à¸›à¸ªà¸¥à¸´à¸›à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™]
```

### Bot Detects Payment Proof:
```javascript
// RouterV1Handler.handleImageFlow()
if (hasReceiptKeywords || amountMatch || bankLogoDetected) {
  // This is payment_proof
  await this.processPaymentSlip(imageBase64);
}
```

### API Called:
```json
POST /api/bot/payments/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "order_id": 123,
  "payment_amount": 15000,
  "slip_image_url": "https://..."
}
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin**: `/admin/orders.php` â†’ à¹à¸ªà¸”à¸‡ Order à¹ƒà¸«à¸¡à¹ˆ
- **Admin**: `/admin/payments.php` â†’ à¸£à¸­à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°
- **Customer**: `/orders.php` â†’ à¸”à¸¹à¸ªà¸–à¸²à¸™à¸° Order
- **Customer**: `/payment-history.php` â†’ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™

---

## ğŸ“± Flow 3: à¸­à¸­à¸¡à¸—à¸­à¸‡ (Savings Program)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸­à¸¢à¸²à¸à¸­à¸­à¸¡à¸—à¸­à¸‡"
"à¸ªà¸™à¹ƒà¸ˆà¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸­à¸­à¸¡à¸—à¸­à¸‡"
"à¸­à¸­à¸¡à¹€à¸‡à¸´à¸™à¸‹à¸·à¹‰à¸­à¸ªà¸£à¹‰à¸­à¸¢"
```

### Bot Process:
1. à¸•à¸£à¸§à¸ˆ Intent â†’ `savings_inquiry`
2. à¸ªà¸£à¹‰à¸²à¸‡ Case type `payment_savings`
3. Bot à¸­à¸˜à¸´à¸šà¸²à¸¢à¹‚à¸›à¸£à¹à¸à¸£à¸¡
4. à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸¥à¸·à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ˆà¸°à¸­à¸­à¸¡
5. à¸ªà¸£à¹‰à¸²à¸‡ Savings Account

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸¥à¸·à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸²:
```
"à¹€à¸¥à¸·à¸­à¸à¸ªà¸£à¹‰à¸­à¸¢à¸„à¸­ 2 à¸šà¸²à¸— à¸£à¸²à¸„à¸² 60,000"
```

### API Called:
```json
POST /api/bot/savings/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "product_ref_id": "N002",
  "product_name": "à¸ªà¸£à¹‰à¸­à¸¢à¸„à¸­à¸—à¸­à¸‡ 2 à¸šà¸²à¸—",
  "product_price": 60000
}

Response:
{
  "success": true,
  "data": {
    "account_no": "SAV-20260112-ABC12",
    "target_amount": 60000,
    "current_amount": 0,
    "remaining": 60000
  }
}
```

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸²à¸à¹€à¸‡à¸´à¸™ (à¸ªà¹ˆà¸‡à¸ªà¸¥à¸´à¸›):
```
[à¸£à¸¹à¸›à¸ªà¸¥à¸´à¸›à¹‚à¸­à¸™ 5,000 à¸šà¸²à¸—]
"à¸à¸²à¸à¸­à¸­à¸¡à¹€à¸”à¸·à¸­à¸™à¸™à¸µà¹‰ 5000"
```

### API Called:
```json
POST /api/bot/savings/{id}/deposit
{
  "amount": 5000,
  "slip_image_url": "https://..."
}
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin**: `/admin/savings.php` â†’ à¸ˆà¸±à¸”à¸à¸²à¸£à¸šà¸±à¸à¸Šà¸µà¸­à¸­à¸¡à¸—à¸­à¸‡
- **Customer**: `/savings.php` â†’ à¸”à¸¹à¸¢à¸­à¸”à¸­à¸­à¸¡ à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²
- **Customer**: `/payment-history.php` â†’ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸à¹€à¸‡à¸´à¸™

---

## ğŸ“± Flow 4: à¸œà¹ˆà¸­à¸™à¸Šà¸³à¸£à¸° (Installments)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸­à¸¢à¸²à¸à¸œà¹ˆà¸­à¸™à¸‹à¸·à¹‰à¸­"
"à¸œà¹ˆà¸­à¸™à¹„à¸”à¹‰à¸à¸µà¹ˆà¸‡à¸§à¸”"
"à¸ªà¸™à¹ƒà¸ˆà¸œà¹ˆà¸­à¸™ 0%"
```

### Bot Process:
1. à¸•à¸£à¸§à¸ˆ Intent â†’ `installment_inquiry`
2. à¸ªà¸£à¹‰à¸²à¸‡ Case type `payment_installment`
3. Bot à¸–à¸²à¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸™à¹ƒà¸ˆ
4. à¸„à¸³à¸™à¸§à¸“à¸‡à¸§à¸”à¸œà¹ˆà¸­à¸™ (6, 10, 12 à¹€à¸”à¸·à¸­à¸™)
5. à¸¥à¸¹à¸à¸„à¹‰à¸²à¸•à¸à¸¥à¸‡ â†’ à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸±à¸à¸à¸²

### à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸±à¸à¸à¸²à¸œà¹ˆà¸­à¸™:
```json
POST /api/bot/installments/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "product_ref_id": "B003",
  "product_name": "à¸à¸³à¹„à¸¥à¸—à¸­à¸‡ 1 à¸šà¸²à¸—",
  "product_price": 30000,
  "down_payment": 3000,
  "total_periods": 6,
  "monthly_payment": 4500
}
```

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ˆà¹ˆà¸²à¸¢à¸‡à¸§à¸” (à¸—à¸¸à¸à¹€à¸”à¸·à¸­à¸™):
```
[à¸ªà¹ˆà¸‡à¸ªà¸¥à¸´à¸›à¹‚à¸­à¸™ 4,500]
"à¸ˆà¹ˆà¸²à¸¢à¸„à¹ˆà¸²à¸‡à¸§à¸”à¹€à¸”à¸·à¸­à¸™à¸™à¸µà¹‰"
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin**: `/admin/installments.php` â†’ à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸±à¸à¸à¸²à¸œà¹ˆà¸­à¸™
- **Customer**: `/installments.php` â†’ à¸”à¸¹à¸ªà¸–à¸²à¸™à¸°à¸ªà¸±à¸à¸à¸² à¸‡à¸§à¸”à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­
- **Customer**: `/payment-history.php` â†’ à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸Šà¸³à¸£à¸°à¸‡à¸§à¸”

---

## ğŸ“± Flow 5: à¸ˆà¸³à¸™à¸³ (Pawn)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸­à¸¢à¸²à¸à¸ˆà¸³à¸™à¸³à¸—à¸­à¸‡"
"à¸£à¸±à¸šà¸ˆà¸³à¸™à¸³à¹„à¸«à¸¡"
"à¸ˆà¸°à¸™à¸³à¸—à¸­à¸‡à¸¡à¸²à¸ˆà¸³à¸™à¸³"
```

### Bot Process:
1. à¸•à¸£à¸§à¸ˆ Intent â†’ `pawn_inquiry`
2. à¸ªà¸£à¹‰à¸²à¸‡ Case type `pawn`
3. Bot à¸–à¸²à¸¡à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”: à¸›à¸£à¸°à¹€à¸ à¸—, à¸™à¹‰à¸³à¸«à¸™à¸±à¸
4. à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸£à¸²à¸„à¸² (65-70% à¸‚à¸­à¸‡à¸¡à¸¹à¸¥à¸„à¹ˆà¸²)
5. à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¸¡à¸²à¸ˆà¸³à¸™à¸³

### à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸±à¸à¸à¸²à¸ˆà¸³à¸™à¸³:
```json
POST /api/bot/pawns/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "product_name": "à¸ªà¸£à¹‰à¸­à¸¢à¸„à¸­à¸—à¸­à¸‡ 96.5%",
  "product_weight_grams": 15.2,
  "gold_purity": "96.5",
  "appraisal_value": 45000,
  "pawn_amount": 31500,
  "interest_rate_percent": 2,
  "due_date": "2026-02-12"
}
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin**: `/admin/pawns.php` â†’ à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸±à¸à¸à¸²à¸ˆà¸³à¸™à¸³
- **Customer**: à¸”à¸¹à¸œà¹ˆà¸²à¸™ LINE à¹„à¸”à¹‰

---

## ğŸ“± Flow 6: à¸‹à¹ˆà¸­à¸¡/à¸‚à¸±à¸”à¹€à¸‡à¸² (Repair)

### à¸¥à¸¹à¸à¸„à¹‰à¸²à¸à¸´à¸¡à¸à¹Œ:
```
"à¸­à¸¢à¸²à¸à¸‹à¹ˆà¸­à¸¡à¹à¸«à¸§à¸™"
"à¸‚à¸±à¸”à¹€à¸‡à¸²à¸ªà¸£à¹‰à¸­à¸¢à¹„à¸”à¹‰à¹„à¸«à¸¡"
"à¹à¸«à¸§à¸™à¸šà¸¸à¸šà¸­à¸¢à¸²à¸à¸‹à¹ˆà¸­à¸¡"
```

### Bot Process:
1. à¸•à¸£à¸§à¸ˆ Intent â†’ `repair_inquiry`
2. à¸ªà¸£à¹‰à¸²à¸‡ Case type `repair`
3. Bot à¸–à¸²à¸¡: à¸›à¸±à¸à¸«à¸²à¸„à¸·à¸­à¸­à¸°à¹„à¸£? à¸ªà¹ˆà¸‡à¸£à¸¹à¸›à¹„à¸”à¹‰à¹„à¸«à¸¡?
4. à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¹ˆà¸‡à¸£à¸¹à¸›à¸ªà¸´à¸™à¸„à¹‰à¸² â†’ Vision API à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ
5. à¸£à¹‰à¸²à¸™à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸£à¸²à¸„à¸² â†’ à¹à¸ˆà¹‰à¸‡à¸¥à¸¹à¸à¸„à¹‰à¸²
6. à¸¥à¸¹à¸à¸„à¹‰à¸²à¸•à¸à¸¥à¸‡ â†’ à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢

### à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡ Repair Request:
```json
POST /api/bot/repairs/index.php
{
  "platform": "line",
  "channel_id": 1,
  "external_user_id": "U12345...",
  "product_name": "à¹à¸«à¸§à¸™à¸—à¸­à¸‡ 2 à¸à¸£à¸±à¸¡",
  "issue_description": "à¹à¸«à¸§à¸™à¸šà¸¸à¸š à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¸¶à¹‰à¸™à¸£à¸¹à¸›à¹ƒà¸«à¸¡à¹ˆ",
  "image_urls": ["https://..."]
}
```

### à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²:
- **Admin**: `/admin/repairs.php` â†’ à¸ˆà¸±à¸”à¸à¸²à¸£à¸‡à¸²à¸™à¸‹à¹ˆà¸­à¸¡
- **Customer**: à¸”à¸¹à¸ªà¸–à¸²à¸™à¸°à¸œà¹ˆà¸²à¸™ LINE

---

## ğŸ–¼ï¸ Image Detection (Vision API)

### à¹€à¸¡à¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¹ˆà¸‡à¸£à¸¹à¸› Bot à¸ˆà¸°à¸•à¸£à¸§à¸ˆ:

```javascript
// RouterV1Handler.handleImageFlow()
async handleImageFlow(imageUrl, session) {
  const imageBase64 = await this.downloadImage(imageUrl);
  const visionResult = await GoogleVisionHelper.analyzeImage(imageBase64);
  
  // Detect: Payment Slip or Product
  if (this.isPaymentSlip(visionResult)) {
    // Process as payment proof
    return this.processPaymentSlip(imageBase64, session);
  } else {
    // Process as product image search
    return this.processProductSearch(imageBase64, session);
  }
}
```

### à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸¥à¸´à¸›:
- à¸•à¸£à¸§à¸ˆ OCR à¸«à¸²: "à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™", "Transfer", "à¸ˆà¸³à¸™à¸§à¸™", à¸Šà¸·à¹ˆà¸­à¸˜à¸™à¸²à¸„à¸²à¸£
- à¸•à¸£à¸§à¸ˆ Logo à¸˜à¸™à¸²à¸„à¸²à¸£
- à¸”à¸¶à¸‡à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸ˆà¸²à¸à¸ªà¸¥à¸´à¸›

### à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²:
- à¸•à¸£à¸§à¸ˆ Labels: "ring", "necklace", "gold", "jewelry"
- à¸«à¸² Similar products à¹ƒà¸™ database

---

## ğŸ”— Data Flow Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LINE/Facebook  â”‚     â”‚   Bot Handler   â”‚     â”‚   API Endpoints  â”‚
â”‚   Customer Chat  â”‚â”€â”€â”€â”€â–¶â”‚   RouterV1      â”‚â”€â”€â”€â”€â–¶â”‚   /api/bot/*     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   CaseEngine    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MySQL Database                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ bot_cases  â”‚  â”‚ savings_accounts  â”‚  â”‚ installment_contractsâ”‚ â”‚
â”‚  â”‚ bot_orders â”‚  â”‚ savings_deposits  â”‚  â”‚ installment_payments â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                      â”‚
          â–¼                    â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Customer Portal Pages                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /cases.php â”‚  â”‚  /savings.php     â”‚  â”‚ /installments.php   â”‚  â”‚
â”‚  â”‚ /orders.phpâ”‚  â”‚  /payment-history â”‚  â”‚                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª Quick Test Commands

### Test Bot Cases:
```bash
curl -X POST "https://autobot-693230987450.asia-southeast1.run.app/api/bot/cases/index.php" \
  -H "Content-Type: application/json" \
  -d '{"platform":"line","external_user_id":"U123test","channel_id":"1","case_type":"product_inquiry"}'
```

### Test Savings:
```bash
curl -X POST "https://autobot-693230987450.asia-southeast1.run.app/api/bot/savings/index.php" \
  -H "Content-Type: application/json" \
  -d '{"platform":"line","external_user_id":"U123test","channel_id":"1","product_ref_id":"PROD001","product_name":"Test Ring","product_price":15000}'
```

---

## ğŸ“Œ Next Steps to Enable Full Chatbot:

1. **Set up LINE Channel** à¹ƒà¸™à¸«à¸™à¹‰à¸² `/admin/line-applications.php`
2. **Configure Webhook URL**: `https://autobot-693230987450.asia-southeast1.run.app/api/webhooks/line.php`
3. **Add Bot Profile Config** à¹ƒà¸™ database
4. **Test with Real LINE Account**

---

Last Updated: 2026-01-12
